\PassOptionsToPackage{hyperindex,colorlinks}{hyperref}
\documentclass{article}
\usepackage[documentation]{tcolorbox}
\usepackage{fancyvrb}
\usepackage{lipsum}

\tcbset{
  skin=enhanced,
  doc head={colback=yellow!10!white,interior style=fill},
  doc head key={colback=magenta!5!white,interior style=fill},
  color key=DarkViolet,
  color value=Teal,
  color color=Teal,
  color counter=Orange!85!black,
  color length=Orange!85!black,
  index colorize,
  index annotate,
}

\input{../utilities/tcb-documentation-deprecated}
\input{../utilities/code-with-output}
\ProvideDocumentEnvironment{example}{ s m }{#2}{}

%\usepackage{makeidx}
\makeindex

\begin{document}

\begin{example}{Original env \Verb|docCommand|, big vskip between adjacent items}
  % \tcbuselibrary{documentation}
  
  \begin{docCommand}
    [doc description=\oarg{input sep} defaults to \Verb|>|]
    {menu}
    {\oarg{input sep}\marg{menu sequence}}
  \end{docCommand}
  %
  \begin{docCommand}{directory}{\oarg{input sep}\marg{menu sequence}}
  \end{docCommand}
  %
  \begin{docCommand}{keys}{\oarg{input sep}\marg{menu sequence}}
    \lipsum[23]
  \end{docCommand}
\end{example}


\begin{example}{New env \Verb|docCommands|, zero vskip between adjacent items}
  \begin{docCommands}{
    {menu}
      {\oarg{input sep}\marg{menu sequence}}
      {\oarg{input sep} defaults to \Verb|>|},
    {directory}
      {\oarg{input sep}\marg{menu sequence}}
      {\oarg{input sep} defaults to \Verb|/|},
    {keys}
      {\oarg{input sep}\marg{menu sequence}}
      {\oarg{input sep} defaults to \Verb|+|}}
    \lipsum[23]
  \end{docCommands}
\end{example}

\begin{example}{New env \Verb|docCommands|, test for length = 2}
  \begin{docCommands}{
    {menu}
      {\oarg{input sep}\marg{menu sequence}}
      {\oarg{input sep} defaults to \Verb|>|},
    {directory}
      {\oarg{input sep}\marg{menu sequence}}
      {\oarg{input sep} defaults to \Verb|/|}}
    \lipsum[23]
  \end{docCommands}
\end{example}

\begin{example}{New env \Verb|docCommands|, test for length = 1}
  \begin{docCommands}{
    {menu}
      {\oarg{input sep}\marg{menu sequence}}
      {\oarg{input sep} defaults to \Verb|>|}}
    \lipsum[23]
  \end{docCommands}
\end{example}


\begin{example}{New env \Verb|docCommands-keyvals|}
  \begin{docCommands-keyvals}
    {
      name = menu,
      para = \oarg{input sep}\marg{menu sequence},
      desc = \oarg{input sep} defaults to \Verb|>|
    }
    [
      {
        name = directory,
        desc = \oarg{input sep} defaults to \Verb|/|,
        label = kv-directory
      },
      {
        name = keys,
        desc = \oarg{input sep} defaults to \Verb|+|
      }
    ]
    content
  \end{docCommands-keyvals}
\end{example}

\begin{example}{New env \Verb|docCommands-keyvals|, document \Verb|\newtheorem| from \Verb|amsthm| package}
  \begin{docCommands-keyvals}
    {
      name = newtheorem,
      para = \marg{envname},
    }
    [
      para = \marg{envname}\oarg{numbered within},
      para = \oarg{numbered like}\marg{envname},
      {
        name = newtheorem*,
        desc = unnumberd theorem
      }
    ]
    content
  \end{docCommands-keyvals}
\end{example}

\printindex
\end{document}
